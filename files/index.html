<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/scrollreveal@4.0.0/dist/scrollreveal.min.js"></script>
    <title translate="no">Trabalho Final | 15 Regras</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <nophone><h1>Não aceitamos celulares</h1></nophone>

    <header class="navigation">
      <div class="container">
        <nav>
          <h1 class="title">Trabalho 3 - Regras</h1>
          <div class="components">
            <a href="#nav-servicos" class="component">Servidor</a>
            <a href="#nav-linguagem" class="component">Linguagem</a>
            <a href="#nav-servico" class="component">Serviços</a>
            <a href="#nav-samba" class="component">Samba</a>
            <a href="#nav-proxy" class="component">Proxy</a>
            <a href="#nav-email" class="component">Email</a>
            <a href="#nav-firewall" class="component">UFW</a>
            <a href="#nav-ftp" class="component">FTP</a>
            <a href="#nav-alunos" class="component">Alunos</a>
          </div>
        </nav>
      </div>
    </header>

    <main>
      <section class="m-top" id="nav-servicos">
        <div class="container divisor" id="showcase-left">
          <div class="text-part">
            <h3>Servidor Utilizado</h3>
            <p class="descricao">
              O servidor utilizado nesta box foi o <i>Apache</i> (apache2),
              pois, ele é o servidor mais popular e também é muito confiável. O
              apache é utilizado por gigantes como Netflix, Airbnb, eBay, Cisco,
              BBC, IBM, Nike, Microsoft, entre muitos são apenas alguns exemplos
              que usufruem das funcionalidades desse servidor que atende às
              solicitações de acesso de conteúdo de vários usuários
              simultaneamente.
            </p>
          </div>
          <div class="image-part">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Apache_HTTP_server_logo_%282019-present%29.svg/2560px-Apache_HTTP_server_logo_%282019-present%29.svg.png"
              alt="Apache Logo"
            />
          </div>
        </div>
      </section>

      <section class="m-top" id="nav-linguagem">
        <div class="container divisor reverse" id="showcase-right">
          <div class="text-part">
            <h3>Linguagem de provisionamento</h3>
            <p class="descricao">
              A linguagem de provisionamento utiizada foi a Puppet, e foi
              escolhida pois é uma ferramenta de automação de TI open source
              para provisionamento, gerenciamento de configurações, implantação
              de aplicações, orquestraçãoe muitos outros processos manuais de
              TI.
            </p>
          </div>
          <div class="image-part">
            <img
              src="https://miro.medium.com/max/447/1*eGsQ4xEeXAL_eCoE3Ld1uw.png"
              alt="Ansible Logo"
            />
          </div>
        </div>
      </section>

      <section class="m-top" id="nav-servico">
        <div class="container" id="showcase-down">
          <div class="divisor">
            <div class="text-part">
              <h3>Serviços provisionados</h3>
              <p class="descricao">
                Foram provisionados 6 tipos de serviços, dos quais foram
                aplicados de forma simples e direta para cunho de estudo. Os
                serviços implementados são:<br />
                1. Samba<br />
                2. Proxy<br />
                3. Email<br />
                4. Firewall<br />
                5. Serviços de arquivos<br />
                6. Banco de dados<br />
              </p>
            </div>
            <div class="image-part">
              <img
                src="https://media0.giphy.com/media/rX0RqM4T4Dzqs8JBam/giphy.gif?cid=790b761138da9c80f4286d45aab09576303ec0c9837d8056&rid=giphy.gif&ct=s"
                alt="6 Logo"
              />
            </div>
          </div>
        </div>
      </section>

      <section class="m-top" id="nav-samba">
        <div class="container" id="showcase-right">
          <div class="text-part">
            <h3>Linguagem de provisionamento - Samba</h3>
            <p class="descricao">
              <br />
              <b>Regra 1</b>: Diretório ‘/basic’ poderá ser acessado por
              usuários dos grupos basic e admin.<br />
              Usuário para teste:
            </p>
            <p class="regra">user: baUser <br />senha: baUser</p>
            <p class="descricao">Implementação:</p>
            <p class="regra">
              [basic]<br />
              ⠀path = /home/vagrant/basic<br />
              ⠀browsable = yes<br />
              ⠀valid users = @admin @basic <br />⠀write list = @admin @basic
              <br />⠀veto files = /*.exe/*.bin/*.csh/*.bat/*.ksh/*.out/*.run<br /><br />
            </p>

            <p class="descricao">
              <b>Regra 2</b>: Diretório ‘/admin poderá ser acessado por usuários
              do grupo admin.<br />
              Usuário para teste:
            </p>
            <p class="regra">user: baUser <br />senha: baUser</p>
            <p class="descricao">Implementação:</p>
            <p class="regra">
              [admin]<br />
              ⠀path = /home/vagrant/admin<br />
              ⠀browsable = yes<br />
              ⠀valid users = @admin <br />⠀write list = @admin <br />⠀veto files
              = /*.exe/*.bin/*.csh/*.bat/*.ksh/*.out/*.run<br /><br />
            </p>

            <p class="descricao">
              <b>Regra 3</b>: Fazer com que arquivos com as seguintes extensões
              sejam bloqueados.
            </p>
            <ul>
              <li class="item-lista">exe</li>
              <li class="item-lista">bin</li>
              <li class="item-lista">csh</li>
              <li class="item-lista">bat</li>
              <li class="item-lista">ksh</li>
              <li class="item-lista">out</li>
              <li class="item-lista">run</li>
            </ul>
            <p class="descricao">Implementação:</p>
            <p class="regra">
              …<br />
              veto files = /*.exe/*.bin/*.csh/*.bat/*.ksh/*.out/*.run
            </p>
          </div>
        </div>
      </section>

      <section class="m-top" id="nav-proxy">
        <div class="container" id="showcase-down">
          <div class="text-part">
            <h3>Serviço provisionado - Proxy</h3>
            <p class="descricao">
              <b>Regra 1:</b> Lista de sites bloqueados e palavras
              bloqueadas.<br />
              Exemplo de sites para teste:<br />
            </p>
            <p class="regra">
              google.com (BLOCK BY denyWebsites.lst)<br />
              github.com (BLOCK BY denyWords.lst)<br />
              unijui.edu.br (GOOD)<br /><br />
            </p>
            Implementação:<br />
            <p class="regra">
              acl SITES_NEGADOS dstdomain "/etc/squid/denyWebsites.lst"
              <br />acl PALAVRAS_NEGADAS url_regex "/etc/squid/denyWords.lst"<br />
              http_access deny rede_interna SITES_NEGADOS limite_tempo<br />
              http_access deny rede_interna PALAVRAS_NEGADAS limite_tempo
            </p>
          </div>
          <br />
          <p class="descricao">
            <b>Regra 2:</b>
            Fazer com que a regra 1 não seja ativada em um certo horário, ou
            seja, em um determinado horário será possível acessar os sites e
            palavras bloqueadas.
          </p>
          <p class="regra">
            Horário de bloqueio: início: 08:00 <br />fim: 17:00<br />
          </p>
          Exemplo:
          <p class="regra">
            sudo timedatectl set-ntp off<br />
            sudo timedatectl set-time 10:00:00<br />
            faça o teste <br />sudo timedatectl set-ntp on<br />
          </p>
          Implementação:
          <p class="regra">
            acl limite_tempo time MTWHF 08:00-17:00 <br />http_access deny
            rede_interna SITES_NEGADOS limite_tempo<br />
            http_access deny rede_interna PALAVRAS_NEGADAS limite_tempo
          </p>
          <p class="descricao">
            <br />
            <b>Regra 3: </b>Limitar a velocidade máxima da banda.<br />
            Implementação:
          </p>
          <p class="regra">
            delay_pools 1<br />
            delay_class 1 1<br />
            delay_access 1 allow all<br />
            delay_parameters 1 254000/254000<br />
          </p>
        </div>
      </section>

      <section class="m-top" id="nav-email">
        <div class="container" id="showcase-right">
          <div class="text-part">
            <h3>Linguagem de provisionamento - Email</h3>
            <p class="descricao">
              <b>Regra 1: </b>Limitar o tamanho de anexos no email.<br />
              Implementação:<br />
            </p>
            <p class="regra">postconf -e message_size_limit=10240</p>
            Teste com:
            <p class="regra">
              Na máquina externa entre na pasta /files/test-files<br />
              copie o conteúdo do arquivo “big.txt”<br />
              $ telnet 192.168.60.58 25<br /><br />
              MAIL FROM: root@localhost<br />
              RCPT TO: vagrant@localhost<br /><br /><br />
              DATA<br />
              Subject: Teste limite<br /><br /><br />
              ${Conteúdo arquivo “big.txt”}<br /><br /><br />
              .<br />
              ```<br />
              quit<br /><br />
              Ná máquina provisionada, entre no usuário vagrant (padrão) e
              digite<br />
              $ mail<br /><br />
            </p>
            <p class="descricao">
              <b>Regra 2: </b>Bloquear uma lista de extensões para os arquivos
              de anexos.<br />Exemplo de extensões para teste:
            </p>
            <p class="regra">
              .bin (BLOCK)<br />
              .pdf (GOOD)<br />
            </p>
            Implementação:
            <p class="regra">
              header_checks = regexp:/etc/postfix/files_extensions_check.lst<br />
              postmap /etc/postfix/files_extensions_check.lst<br />
            </p>
            <p class="descricao">
              <br /><b>Regra 3: </b>Limitar a quantidade de remetentes para um
              email, visando implementar uma regra de anti-spam.<br />
              Implementação:
            </p>
            <p class="regra">postconf -e smtpd_recipient_limit=2<br /><br /></p>
            <p class="descricao">Teste com:</p>
            <p class="regra">
              MAIL FROM: root@localhost<br />
              RCPT TO: vagrant@localhost<br />
              RCPT TO: felipe.ernesto@sou.unijui.edu.br<br />
            </p>
          </div>
        </div>
      </section>

      <section class="m-top" id="nav-firewall">
        <div class="container" id="showcase-down">
          <div class="text-part">
            <h3>Serviços provisionados - Firewall</h3>
            <p class="descricao">
              <br /><b>Regra 1: </b>Bloquear o acesso por SSH porta 22.<br />
              Implementação:
            </p>
            <p class="regra">ufw deny 22<br /><br /></p>
            <p class="descricao">
              <b>Regra 2: </b>Bloqueia todas as portas que não serão usadas.<br />Implementação:
            </p>
            <p class="regra">
              ufw default deny incoming<br />
              ufw default deny outgoing<br /><br />
            </p>
            <p class="descricao">
              <b>Regra 3: </b>Adiciona "log" para solicitações no Firewall.<br />Implementação:
            </p>
            <p class="regra">sudo ufw logging on high<br /></p>
            <p class="descricao">Teste:<br /></p>
            <p class="regra">
              Faça alguma ação com a máquina provisionada (telnet, senha, proxy,
              ...)<br />
              E então verifique o arquivo de log do Firewall<br />
              $ sudo nano /var/log/ufw.log<br />
            </p>
          </div>
        </div>
      </section>

      <section class="m-top" id="nav-ftp">
        <div class="container" id="showcase-right">
          <div class="text-part">
            <h3>Linguagem de provisionamento - FTP</h3>
            <p class="descricao">
              <b>Regra 1: </b>Apenas acesso com login e senha.<br />Implementação:
            </p>
            <p class="regra">
              anonymous_enable=NO<br />
              local_enable=YES<br />
            </p>
            <p class="descricao">Usuário para teste:<br /></p>
            <p class="regra">
              user: adUser<br />
              senha: adUser<br />
            </p>
            <p class="descricao">Teste:<br /></p>
            <p class="regra">
              Dentro do Filezilla vá para File > Site Manager<br />
              Estando lá clique em New Site<br />
              Selecione TLS explícito nas opções de criptografia<br />
              Utilize os seguintes dados nos campos:<br />
              ⠀⠀Host: 192.168.60.58<br />
              ⠀⠀Logon Type: Ask Password<br />
              ⠀⠀User: adUser<br />
              Inseridos esses dados, clique em Connect e insira a senha
              "adUser"<br /><br />
              <br /><br />
            </p>
            <p class="descricao">
              <b>Regra 2: </b>Bloquear downloads. <br />Implementação:
            </p>
            <p class="regra">download_enable=NO<br /><br /></p>
            <p class="descricao">
              <b>Regra 3: </b>Bloquear certas extensões de arquivos e também uma
              lista de nomes de pastas/arquivos que será bloqueada.<br />Implementação:
            </p>
            <p class="regra">
              deny_file={*.exe,*.bin,*.csh,*.bat,*.ksh,*.out,*.run,*felipe*}<br />
            </p>
            <p class="descricao">Teste:<br /></p>
            <p class="regra">
              Na máquina externa entre na pasta /files/test-files<br />
              tente transferir o arquivo “some.exe” (BLOCK BY *.exe)<br />
              tente transferir o arquivo “senha-felipe.txt” (BLOCK BY
              *felipe*)<br /><br />
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container showcase">
        <div class="showcase-text" id="nav-alunos">
          <h2>Integrantes</h2>
          <p>Felipe Schmidt</p>
          <p>Gabriel Walker</p>
          <p>Luis Tabile</p>
        </div>
        <div class="showcase-image">
          <a
            href="https://github.com/FelipeESchmidt/ansible-box-services"
            target="blank"
            ><img
              src="https://cdn-icons-png.flaticon.com/512/25/25231.png"
              alt="Github Logo"
          /></a>
        </div>
      </div>
    </footer>
    <script src="./app.js"></script>
  </body>
</html>
